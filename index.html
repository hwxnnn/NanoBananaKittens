<!DOCTYPE html>
<html>
<head>
    <title>Cat Meme Gallery</title>
    <style>
        body { font-family: sans-serif; background: #111; color: #fff; text-align: center; }
        h1 { margin-top: 40px; font-size: 2rem; margin-bottom: 10px; }
        .info-bar { 
            color: #aaa; 
            font-size: 0.9rem; 
            margin-bottom: 30px; 
            background: #222; 
            display: inline-block; 
            padding: 8px 16px; 
            border-radius: 20px; 
        }
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            padding: 20px;
        }
        .gallery img {
            width: 100%;
            height: auto;
            border-radius: 10px;
            transition: transform 0.2s, opacity 0.3s;
            opacity: 0; /* Hidden until loaded for fade-in effect */
        }
        .gallery img.loaded { opacity: 1; }
        .gallery img:hover { transform: scale(1.05); cursor: pointer; }
        a { text-decoration: none; color: inherit; }
    </style>
</head>
<body>
    <h1>üçåüêàüêà by @hwx.nnn</h1>
    <div class="info-bar">‚ÑπÔ∏è Click any image to view full 8K version (.png)</div>
    
    <div class="gallery" id="gallery"></div>

    <script>
        // --- CONFIGURATION ---
        const username = 'hwxnnn';
        const repo = 'NanoBananaKittens';
        const branch = 'main'; // Change to 'master' if your default branch is master
        
        const compressedFolder = 'compressed'; // The folder with small JPGs
        const originalFolder = 'original';     // The folder with 8K PNGs
        // ---------------------

        const gallery = document.getElementById('gallery');
        const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/${compressedFolder}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                data.forEach(file => {
                    // We only look for JPGs in the compressed folder
                    if (file.name.match(/\.(jpg|jpeg)$/i)) {
                        
                        // 1. Construct the link to the ORIGINAL .png in the other folder
                        // We take the filename (e.g., 'cat.jpg'), replace extension with .png
                        const originalFileName = file.name.replace(/\.(jpg|jpeg)$/i, '.png');
                        const originalUrl = `https://raw.githubusercontent.com/${username}/${repo}/${branch}/${originalFolder}/${originalFileName}`;

                        // 2. Create the link wrapper
                        const link = document.createElement('a');
                        link.href = originalUrl;
                        link.target = "_blank"; // Open in new tab

                        // 3. Create the image element
                        const img = document.createElement('img');
                        
                        // OPTIONAL: We still use wsrv.nl here even for compressed images
                        // just to ensure they fit the grid perfectly (200px width)
                        img.src = `https://wsrv.nl/?url=${encodeURIComponent(file.download_url)}&w=400&q=80&output=webp`;
                        img.loading = "lazy";
                        
                        // Fade-in animation when image is ready
                        img.onload = () => img.classList.add('loaded');

                        link.appendChild(img);
                        gallery.appendChild(link);
                    }
                });
            })
            .catch(error => {
                console.error('Error:', error);
                gallery.innerHTML = "<p>Error loading gallery. Make sure the 'compressed' folder exists and has images.</p>";
            });
    </script>
</body>
</html>